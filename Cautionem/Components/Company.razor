@page "/Company"
@using Cautionem.Models

@inject DialogService dialogService
@inject Cautionem.Data.CompanyService companyService
@inject IStringLocalizer<Company> Localizer

<div>
    <h1>@Localizer["Empresa"]</h1>
    <div class="row">
        <Addons>
            <Addon AddonType="AddonType.Start">
                <AddonLabel Style="width:100px">@Localizer["Empresa"]</AddonLabel>
            </Addon>
            <Addon AddonType="AddonType.Body">
                <TextEdit @bind-Value="@company.Name"/>
            </Addon>
        </Addons>
    </div>
    <div class="row">
        <Addons>
            <Addon AddonType="AddonType.Start">
                <AddonLabel Style="width:100px">@Localizer["NIF"]</AddonLabel>
            </Addon>
            <Addon AddonType="AddonType.Body">
                <TextEdit @bind-Value="@company.FiscalId" />
            </Addon>
        </Addons>
    </div>
    <div class="row">
        <Addons>
            <Addon AddonType="AddonType.Start">
                <AddonLabel Style="width:100px">@Localizer["Address"]</AddonLabel>
            </Addon>
            <Addon AddonType="AddonType.Body">
                <TextEdit @bind-Value="@company.Address" />
            </Addon>
        </Addons>
    </div>
    <div class="row">
        <Addons>
            <Addon AddonType="AddonType.Start">
                <AddonLabel Style="width:100px">@Localizer["Town"]</AddonLabel>
            </Addon>
            <Addon AddonType="AddonType.Body">
                <TextEdit @bind-Value="@company.City" />
            </Addon>
        </Addons>
    </div>
    <div class="row">
        <Addons>
            <Addon AddonType="AddonType.Start">
                <AddonLabel Style="width:100px">@Localizer["zip"]</AddonLabel>
            </Addon>
            <Addon AddonType="AddonType.Body">
                <TextEdit @bind-Value="@company.ZipCode" />
            </Addon>
        </Addons>
    </div>
    <div class="row">
        <Addons>
            <Addon AddonType="AddonType.Start">
                <AddonLabel Style="width:100px">@Localizer["Email"]</AddonLabel>
            </Addon>
            <Addon AddonType="AddonType.Body">
                <TextEdit @bind-Value="@company.Email" />
            </Addon>
        </Addons>
    </div>
    <br />
    <div class="d-flex justify-content-center">
        <button class="btn btn_general btn-success" @onclick="SaveCompany">@SharedLocalizer["MSG_SAVE"]</button>
    </div>
</div>

@code {

    private Cautionem.Models.Company company = new Cautionem.Models.Company();

    protected override async Task OnInitializedAsync()
    {
        company = await companyService.Get(1);
    }

    private async void SaveCompany()
    {
        await companyService.Save(company);
    }
}