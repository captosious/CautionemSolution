@page "/CustomerSetup"
@using Cautionem.Models
@using System.Linq

@inject Cautionem.Data.CustomerService customerService
@inject IStringLocalizer<Components.Customer> Localizer

<h1>@Localizer["configcustomer"]</h1>

<CustomerSearch OnCustomerSelected=@OnCustomerSelected />

@if (ShowDetail)
{
    <CustomerDetail parCustomer=parCustomer/>
    <CustomerContacts parCustomer=parCustomer/>
}

@code{
    protected Models.Customer parCustomer = new Models.Customer();

    //Modal Customer Edit
    private Modal modalWindowEdit;
    private bool IsNew = false;
    private bool ShowDetail = false;
    private string modalTitle;

    protected override async Task OnInitializedAsync()
    {
        //modalWindowEdit.Hide();
        ShowDetail = false;
    }

    private void OnCustomerSelected(Models.Customer customer)
    {
        ShowDetail = true;
        parCustomer = customer;
    }

    private async void Delete()
    {

    }

    // Modal
    private void CloseModal()
    {
        modalWindowEdit.Hide();
    }

    private void OpenModal()
    {
        modalWindowEdit.Show();
    }

    private void OnClosing(CancelEventArgs e)
    {
        StateHasChanged();
    }

}